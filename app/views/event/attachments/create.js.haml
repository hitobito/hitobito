-#  Copyright (c) 2015, Pro Natura Schweiz. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

- errors = []
- @attachments.each do |attachment|
  - if attachment.persisted? && attachment.file.attached?
    document.getElementById("attachments").firstElementChild.innerHTML += '#{j(render(attachment))}'
  - else
    - errors << attachment.errors.full_messages.join(', ')

- if errors.present?
  alert('#{t('.failure', errors: errors.uniq.join("\n"))}');
