-#  Copyright (c) 2012-2024, Jungwacht Blauring Schweiz. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

- current_ability.finance_layer_ids.each do |layer_id|
  - parent_group = parents.find(Group).first

  - if parent_group.id == layer_id
    .divider
      = parent_group
      = link_to icon('link'), parent_group, class: 'inline'
    %ul
      = nav t('navigation.invoices/single'), group_invoices_path(layer_id), %w(invoices), %w(invoice_lists evaluations)
      = nav InvoiceList.model_name.human(count: 2), group_invoice_lists_path(layer_id), %w(invoice_lists)
      = nav t('navigation.invoices/evaluations'), group_invoices_evaluations_path(layer_id), %w(invoice_evaluations)
      = nav InvoiceArticle.model_name.human(count: 2), group_invoice_articles_path(layer_id), %w(invoice_articles)
      = nav t('navigation.admin'), group_invoice_config_path(layer_id), %w(invoice_config)
    .divider

  - else
    = nav Group.find(layer_id), group_invoices_path(layer_id)
