-#  Copyright (c) 2012-2017, Jungwacht Blauring Schweiz. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

= entry_form(url: group_invoice_list_path(parent),
             cancel_url: cancel_url,
             data: { group: group_path(parent) }) do |f|

  = f.hidden_field :receiver_id
  = f.hidden_field :receiver_type
  = f.hidden_field :recipient_ids

  = f.fields_for :invoice, entry.invoice do |fi|
    = fi.labeled_input_field :title, help: t('.recipient_info', count: entry.recipient_ids_count)

    = fi.labeled_input_field :description
    = fi.labeled_input_field :payment_information
    = fi.labeled_input_field :payment_purpose

    = field_set_tag do
      = render "invoice_articles", f: fi

    = field_set_tag do
      = fi.labeled_inline_fields_for :invoice_items, 'invoice_items'

    = render "calculated", invoice: fi.object.decorate
