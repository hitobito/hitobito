-#  Copyright (c) 2012-2017, Jungwacht Blauring Schweiz. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

= standard_form(path_args(entry), noindent: true, stacked: true) do |form|
  = render_extensions :form, locals: { f: form }
  = form.error_messages

  .ml-3
    = render "range", f: form

    .mt-3.mb-3#overview
      = render "criterion", criterion: :role
      = render "criterion", criterion: :attributes
      = render "criterion", criterion: :qualification
      = render "criterion", criterion: :tag, force: @criterias.include?("tag_absence")

    #filter-critera-dropdown.d-flex.flex-column
      %label#filter-advice= t(".filter_advice_heading")
      .div.mt-1
        = Dropdown::PeopleFilter.new(self, current_user, @criterias).to_s

    .mt-4= render 'search_button', f: form

  .mt-5
    %h3= t('.save_filter')
    - if can?(:create, entry)
      %label.required=PeopleFilter.human_attribute_name(:name)
      = form.input_field :name, placeholder: t('.save_filter_placeholder'), class: 'mb-3 ', required: false

  = render 'save_button', f: form
